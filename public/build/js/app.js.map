{"version":3,"sources":["AppController.js","ImageController.js","PagesController.js","AutocompleteFactory.js","app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["var App = angular.module('Blaa', ['ngMaterial','ngRoute','datePicker']);\n\nApp.config(['$locationProvider','$routeProvider', function ($locationProvider,$routeProvider){\n  $locationProvider.html5Mode(true);\n}]);\n\nApp.constant('SERVER',{\n    'domain':'http://blaa.demodayscript.com',\n    'port':'80'\n});\n\nApp.constant('SERVERFRONT',{\n    'domain':'http://nuevo.banrepcultural.org',\n    'port':'80'\n});\n\nApp.controller('LastUpdateController',function($scope,$http,$timeout,$q,$log,$rootScope,SERVER,SERVERFRONT){\n  $http.get(SERVER.domain+'/content/last/update')\n     .success(function(data,status,headers,config){\n     $scope.lastUpdate = data.nodes[0].ultimo_nodo\n   })\n});\n\nApp.controller('SearchController', function($scope,$http,$timeout,$q,$log,$rootScope,SERVER,SERVERFRONT){\n  var date = new Date()\n  $scope.years = []\n  $scope.start = new Date('1966');\n  $scope.start = $scope.start.getFullYear()+1\n  $scope.end = new Date();\n  $scope.end = $scope.end.getFullYear()+1\n\n  for (var i = $scope.start; i < $scope.end; i++) {\n      $scope.years.push(i)\n  }\n  $http.get(SERVER.domain+'/taxonomias/series/json')\n     .success(function(data,status,headers,config){\n     $scope.series = data.nodes\n   })\n  $http.get(SERVER.domain+'/taxonomias/paises/json')\n    .success(function(data,status,headers,config){\n    $scope.paises = data.nodes\n  })\n  $http.get(SERVER.domain+'/taxonomias/instrumentos/json')\n   .success(function(data,status,headers,config){\n   $scope.instrumentos = data.nodes\n  })\n\n   $scope.GetAutors = function(){\n        var deferred = $q.defer();\n        $http.get(SERVERFRONT.domain+'/json/autores.json')\n            .success(function(data,status,headers,config){\n                $scope.data = data.nodes\n                //console.log($scope.data);\n                deferred.resolve($scope.data);\n            })\n        return deferred.promise;\n    }\n\n    $scope.GetComposers = function(){\n         var deferred = $q.defer();\n         $http.get(SERVERFRONT.domain+'/json/compositores.json')\n              .success(function(data,status,headers,config){\n                 $scope.data = data.nodes\n                 deferred.resolve($scope.data);\n             })\n         return deferred.promise;\n     }\n    $scope.CallBackFilterComposers = function(text){\n        var query = angular.lowercase(text);\n        var myPromise = $scope.GetComposers();\n        return myPromise.then(function(resolve){\n                resolve = filter(query,resolve)\n                debugResolve(resolve);\n                return resolve.unique();\n              });\n    }\n    $scope.CallBackFilter = function(text){\n        var query = angular.lowercase(text);\n        var myPromise = $scope.GetAutors();\n        return myPromise.then(function(resolve){\n                resolve = filter(query,resolve)\n                debugResolve(resolve)\n                return resolve.unique();\n              });\n    }\n    function debugResolve(resolve){\n      return resolve.splice(0,1);\n    }\n\n    Array.prototype.unique=function(a){\n      return function(){\n        return this.filter(a)\n      }\n    }(function(a,b,c){\n      return c.indexOf(a,b+1)<0\n    });\n\n    function filter(query,resolve){\n      var data;\n      var item = [];\n      for( var i = 0; i <= resolve.length-1;i++){\n          var item = angular.lowercase(resolve[i]['Título']);\n          if (item.indexOf(angular.lowercase(query)) >= 0){\n             data += '/'+ resolve[i]['Título'];\n           }\n      }\n      return data.split('/').map( function (pos) {\n        return pos.replace('','');\n      });\n    }\n\n});\n","App.controller('ImageController',function($scope,$http,$timeout,$q,$log,SERVER,SERVERFRONT){\r\n  //console.log(SERVERFRONT.domain)\r\n  //$http.get(SERVERFRONT.domain+'/musica/conciertos/img/json').success(function(data,status,headers,config){\r\n  $http.get(SERVERFRONT.domain+'/musica/conciertos/img/json').success(function(data,status,headers,config){\r\n    //console.log(data);\r\n    $scope.images = data\r\n  })\r\n});\r\n","App.controller('PageController',function($scope,$http,$timeout,$q,$log,$sce,SERVER,SERVERFRONT){\r\n  $http.get(SERVER.domain+'/paginas-basicas/musica').success(function(data,status,headers,config){\r\n    console.log(data.nodes[0].node);\r\n    $scope.title = data.nodes[0].node.title\r\n    $scope.content = $sce.trustAsHtml(data.nodes[0].node.Contenido);\r\n  })\r\n});\r\n","App.factory('AutorsService', function($http) {\r\n    var Autors = {\r\n      async: function() {\r\n        var promise = $http.get('http://blaa.local/autocomplete/autores').then(function (response) {\r\n          return response.data;\r\n        });\r\n        return promise;\r\n      }\r\n    };\r\n    return Autors;\r\n  });\r\n","$(document).foundation()\r\n\r\n$(document).ready(function() {\r\n\r\n\t//Permite cerrar los mensajes emergentes\r\n    jQuery('.close-button').click(function(){jQuery('.callout').fadeOut();});\r\n});\r\n"],"sourceRoot":"/source/"}